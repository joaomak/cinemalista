function openWin(e,t,n){var i=window.screen.width/2-(t/2+10),o=window.screen.height/2-(n/2+50),a=window.open(e,"","status,toolbar=0,height="+n+",width="+t+",resizable=yes,left="+i+",top="+o+",screenX="+i+",screenY="+o+",scrollbars=yes");return a.opener=window,a.focus(),!1}function toggleFollow(e){var e=$(e),t=e.attr("href");return"undefined"==typeof t||0==t?!1:(e.button("loading"),$.ajax(t).done(function(t){1!=t&&(location=e.attr("href")),e.button("reset"),e.button("toggle"),e.toggleClass("btn-primary"),e.find("i").toggleClass("icon-white")}),!1)}function loader(){return online?($("body").addClass("loading"),void 0):(alert("Este aplicativo necessita de acesso Ã  internet."),!1)}function unloader(){$("body").removeClass("loading")}function getUserInfo(e){localStorage.setItem("uid",e),getSidebar(e),$.get(domain,{app:"user",lang:_lang,userid:e},function(t){$("#userinfo").html(t),$(".dull").addClass("side-nav").removeClass("dull"),menu_init(),$("#profile-link").click(function(e){e.preventDefault(),$("#modal2").find(".modal-title").text("Minha conta"),$("#modal2").modal({show:!0,remote:domain+$(this).attr("href")+"?app"})}),$("#changelang").click(function(t){t.preventDefault(),_lang=$(this).data("lang"),$("body").removeClass("pt en").addClass(_lang),$("#q").attr("placeholder",$("#q").data("placeholder-"+_lang)),getUserInfo(e)}),$("#sair-link").click(function(e){e.preventDefault(),localStorage.clear(),navigator.app?navigator.app.exitApp():navigator.device&&navigator.device.exitApp()})})}function getSidebar(e){$.get(domain,{app:"sidebar",lang:_lang,userid:e},function(e){$("#side-menu").html(e),menu_init()})}function content_init(){$("body").removeClass("one-movie"),$("html,body,#content").animate({scrollTop:0},200),external_link(),snapper.close(),$(".thumbnail").click(function(e){e.preventDefault(),$(this).longClick(function(){return $(this).next().fadeToggle(),!1}),loader();var t=$(this).attr("href");return share_url=domain+t,$.get(domain+t,{app:!0,lang:_lang},function(e){$("#movie").length?$("#movie").html(e):$("#content").append('<div id="movie">'+e+"</div>"),unloader(),movie_init()}),!1}),$(".pagination").find("a").click(function(e){e.preventDefault(),loader();var t=$(this).attr("href");return $.get(domain+t,{app:!0,lang:_lang},function(e){$("#content").html(e),content_init(),unloader()}),!1})}function menu_init(){external_link(),$("#side-menu").find("a").click(function(e){e.preventDefault(),loader(),$(".snap-drawer").find("li").removeClass("active"),$(this).parent().addClass("active");var t=$(this).attr("href"),n=$(this).data("tag");return $.get(domain+t,{app:!0,tag:n,lang:_lang},function(e){$("#content").html(e),content_init(),snapper.close(),unloader()}),!1}),$(".site-links").find("a").click(function(e){e.preventDefault(),loader(),$(".snap-drawer").find("li").removeClass("active"),$(this).parent().addClass("active");var t=$(this).attr("href");return $.get(domain+t,{app:!0,lang:_lang},function(e){$("#content").html(e),content_init(),snapper.close(),unloader()}),!1})}function movie_init(){$("body").addClass("one-movie"),external_link(),$("#content").animate({scrollTop:0},100),$("#toggles .ok").click(function(){var e=$(this);return e.button("loading"),$.post(domain+e.attr("href"),{id:$("#toggles").data("id"),name:$("#toggles").data("name"),year:$("#toggles").data("year"),poster:$("#toggles").data("poster"),app:!0,lang:_lang},function(t){1!=t&&alert(t),e.button("reset"),e.button("toggle"),e.toggleClass("btn-primary"),e.find("i").toggleClass("icon-white")}),!1})}function external_link(){$("a[href^='http']").click(function(e){return window.open($(this).attr("href"),"_system"),e.preventDefault(),!1})}function FastClick(e,t){"use strict";function n(e,t){return function(){return e.apply(t,arguments)}}var i;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,r=0,s=o.length;s>r;r++)a[o[r]]=n(a[o[r]],a);deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,i):o.call(e,t,n,i)},e.addEventListener=function(t,n,i){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):o.call(e,t,n,i)}),"function"==typeof e.onclick&&(i=e.onclick,e.addEventListener("click",function(e){i(e)},!1),e.onclick=null)}}function onOffline(){online=!1}function onOnline(){online=!0}$("#share-btn").click(function(){return $("#share-page").modal(),!1}),$(".follow").click(function(){return toggleFollow($(this)),!1}),$(".dull").click(function(e){return e.stopPropagation(),e.preventDefault(),$(this).hasClass("dull")&&$("#modal1").modal("show"),!1}),$("#social a").click(function(){return openWin($(this).attr("href"),650,500)}),$("#contact-form").length&&$("#contact-form").validate({rules:{name:{minlength:2,required:!0},email:{required:!0,email:!0},mensagem:{minlength:2,required:!0}}}),$("#logo").click(function(){"left"==snapper.state().state?snapper.close():snapper.open("left")}),$(".form-search").submit(function(e){e.preventDefault();var t=$(this).find("input").val();if(t.length<2)return!1;var n=$(this).find(".btn");return n.addClass("disabled"),loader(),$(this).find("input").blur(),$.get(domain,{q:t,app:!0,lang:_lang},function(e){n.removeClass("disabled"),'<ul id="movies"'==e.substring(0,15)?($("#content").html(e),content_init()):($("#movie").length?$("#movie").html(e):$("#content").append('<div id="movie">'+e+"</div>"),movie_init()),unloader()}),!1}),$.fn.longClick=function(e,t){var n;t=t||500,$(this).mousedown(function(){return n=setTimeout(function(){e()},t),!1}),$(document).mouseup(function(){return clearTimeout(n),!1})};var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){"use strict";return deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){"use strict";var t;deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n,i,o,a,r=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(a=e.changedTouches[0],r=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=r.tagName.toLowerCase(),"label"===i){if(t=this.findControl(r)){if(this.focus(r),deviceIsAndroid)return!1;r=t}}else if(this.needsFocus(r))return e.timeStamp-n>100||deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,e),deviceIsIOS&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(r)||(e.preventDefault(),this.sendClick(r,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";var t,n;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e,t){"use strict";return new FastClick(e,t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,$(function(){_lang=$("body").attr("class"),$("#q").attr("placeholder",$("#q").data("placeholder-"+_lang)),FastClick.attach(document.body);var e=localStorage.getItem("uid");null!=e&&getUserInfo(e),content_init(),menu_init()});var snapper=new Snap({element:document.getElementById("content"),dragger:null,disable:"right",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:230,minPosition:-230,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:16});document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){if($(".modal").hasClass("in"))$(".modal").find(".close").click();else if($("body").hasClass("one-movie"))$("body").removeClass("one-movie");else if("closed"!=snapper.state().state)snapper.close();else if(confirm("Sair do aplicativo?"))return navigator.app?navigator.app.exitApp():navigator.device&&navigator.device.exitApp(),!1;return!1},!1),share_url="http://www.cinemalista.com/",$("#share").click(function(){return window.plugins.socialsharing.share("Cinemalista",null,null,share_url),!1})},!1),document.addEventListener("offline",onOffline,!1),document.addEventListener("online",onOnline,!1),online=!0;