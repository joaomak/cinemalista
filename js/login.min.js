var googleapi={authorize:function(e){var o=$.Deferred(),t="https://accounts.google.com/o/oauth2/auth?"+$.param({client_id:e.client_id,redirect_uri:e.redirect_uri,response_type:"code",scope:e.scope}),n=window.open(t,"_blank","location=no,toolbar=no");return $(n).on("loadstart",function(t){var r=t.originalEvent.url,i=/\?code=(.+)$/.exec(r),c=/\?error=(.+)$/.exec(r);(i||c)&&n.close(),i?$.post("https://accounts.google.com/o/oauth2/token",{code:i[1],client_id:e.client_id,client_secret:e.client_secret,redirect_uri:e.redirect_uri,grant_type:"authorization_code"}).done(function(e){o.resolve(e)}).fail(function(e){o.reject(e.responseJSON)}):c&&o.reject({error:c[1]})}),o.promise()},getinfo:function(){$.post("https://accounts.google.com/o/oauth2/token",{code:code[1],client_id:options.client_id,client_secret:options.client_secret,redirect_uri:options.redirect_uri,grant_type:"authorization_code"}).done(function(e){deferred.resolve(e)}).fail(function(e){deferred.reject(e.responseJSON)})}};$(document).on("ready",function(){var e=$(".login");e.on("click",function(){googleapi.authorize({client_id:"828831281117.apps.googleusercontent.com",client_secret:"xZrAvMkJAtFoFCU0ri3Nu7Rv",redirect_uri:"http://localhost/jm/cinemalista/site/",scope:"https://www.googleapis.com/auth/plus.me"}).done(function(e){$.get(domain,{app:!0,userinfo:!0,code:e.access_token},function(e){$(".snap-drawer-right").html(e)})}).fail(function(e){alert(e.error)})})});